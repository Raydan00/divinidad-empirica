<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sangre de Divinidad Empírica</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8b0000">
</head>
<body>
    <header>
        <h1>Sangre de Divinidad Empírica</h1>
    </header>

    <nav id="nav-chapters">
        <!-- Botones se generarán automáticamente -->
    </nav>

    <main>
        <section id="chapter-content">
            <h2 id="chapter-title">Cargando...</h2>
            <p id="chapter-text">Por favor espera.</p>
            <audio id="chapter-audio" controls>
                <source id="audio-src" src="" type="audio/mpeg">
            </audio>
        </section>
    </main>

    <script>
        const totalChapters = 10; // cambia si agregas más capítulos
        let currentChapter = 1;

        // Generar botones automáticamente
        const nav = document.getElementById('nav-chapters');
        for(let i = 1; i <= totalChapters; i++) {
            const btn = document.createElement('button');
            btn.textContent = `Capítulo ${i}`;
            btn.onclick = () => showChapter(i);
            nav.appendChild(btn);
        }

        function showChapter(num) {
            if(num < 1 || num > totalChapters) return;
            currentChapter = num;

            document.getElementById('chapter-title').textContent = `Capítulo ${num}`;
            document.getElementById('audio-src').src = `audio/cap${num}.mp3`;
            document.getElementById('chapter-audio').load();

            fetch(`chapters/cap${num}.txt`)
                .then(resp => resp.text())
                .then(text => {
                    document.getElementById('chapter-text').textContent = text;
                })
                .catch(err => {
                    document.getElementById('chapter-text').textContent = "Capítulo no disponible.";
                });
        }

        // Cargar el primer capítulo al inicio
        showChapter(1);
    </script>
</body>
</html>
